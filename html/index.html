<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>raytracer: raytracer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">raytracer<span id="projectnumber">&#160;1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">raytracer </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md_README"></a><img src="https://img.shields.io/badge/os-Linux-lightgrey" alt="Operating Systems" class="inline"/> <a href="https://github.com/federicopellegatta/raytracing/actions"><img src="https://img.shields.io/github/workflow/status/federicopellegatta/raytracing/CMake" alt="CI" class="inline"/></a> <a href="https://www.gnu.org/licenses/gpl-3.0.html"><img src="https://img.shields.io/badge/License-GPL%20v3-yellow.svg" alt="GPLv3 License" style="pointer-events: none;" class="inline"/></a></p>
<p >raytracer is a C++ code that you can use to generate simple photorealistic images using spheres and planes. Secondly, it can be also used to convert a image from <code>pfm</code> to <code>png</code> or <code>jpeg</code> format.</p>
<h1><a class="anchor" id="autotoc_md6"></a>
Installation</h1>
<p >Note that raytracer since v1.0.0 works only on Linux machines. </p>
<h2><a class="anchor" id="autotoc_md7"></a>
Dependencies</h2>
<ul>
<li>C++ Compiler (at least C++17)</li>
<li><a href="https://cmake.org/">CMake</a> (at least version 3.16)</li>
<li><a href="https://libgd.github.io/">GD library</a> (at least version 2.5.5)</li>
<li><a href="https://www.freedesktop.org/wiki/Software/pkg-config/">pkg-config</a> (at least version 0.29)</li>
</ul>
<p >If you want to generate animations, we also recommend:</p><ul>
<li><a href="https://www.ffmpeg.org/">ffmpeg</a> (at least version 4.2.4)</li>
<li><a href="https://www.gnu.org/software/parallel/">GNU parallel</a></li>
</ul>
<p >If you're willing to use <a href="https://docs.conda.io/en/latest/"><code>conda</code></a>, or if you already do, all the above dependencies can be installed via </p><div class="fragment"><div class="line">$ conda env create -n &lt;envname&gt; -f requirements.yml</div>
</div><!-- fragment --><p> Or you can use your distribution package manager to install them.</p>
<h2><a class="anchor" id="autotoc_md8"></a>
Download and building</h2>
<p >If all the dependencies have been met,</p><ul>
<li>you can download the latest stable release <a href="https://github.com/federicopellegatta/raytracing/releases">here</a>, and unpack it <div class="fragment"><div class="line">$ tar -xvf /path/to/tar #or zip file -C /path/to/your/directory</div>
</div><!-- fragment --></li>
<li>if you want to stay up to date with the latest changes (note that they might not work as intended), clone this repository <div class="fragment"><div class="line">$ git clone https://github.com/federicopellegatta/raytracing.git</div>
</div><!-- fragment --></li>
</ul>
<p >Next, follow the instructions below in order to compile raytracer in your own directory. </p><div class="fragment"><div class="line">$ cd /path/to/your/directory  </div>
<div class="line">$ # (if you&#39;re using conda -&gt; conda activate &lt;envname&gt;)</div>
<div class="line">$ cmake -S . -B build -DCMAKE_BUILD_TYPE=Release </div>
<div class="line">$ cd build/</div>
<div class="line">$ cmake --build . -j &lt;NUM_OF_CORES&gt; # We advise at least 2 cores, as the compilation process is a bit slow</div>
</div><!-- fragment --><p> You will find tests and executable files in <code>build</code> directory. Note that the executable main file is <code>raytracer</code>.</p>
<h1><a class="anchor" id="autotoc_md9"></a>
Usage</h1>
<p >To check if tests are passing do </p><div class="fragment"><div class="line">$ cmake -S . -B build -DCMAKE_BUILD_TYPE=Debug </div>
<div class="line">$ cd build</div>
<div class="line">$ cmake --build . -j &lt;NUM_OF_CORES&gt;</div>
<div class="line">$ ctest</div>
</div><!-- fragment --><p> If tests are not passing feel free to open an issue.</p>
<p >A help menu will be displayed by typing (the command-line interface is built using <a href="https://github.com/Taywee/args">Taywee/args</a>) </p><div class="fragment"><div class="line">$ ./raytracer --help</div>
</div><!-- fragment --> <h2><a class="anchor" id="autotoc_md10"></a>
Render</h2>
<p >raytracer can generate images using 3 algorithms:</p><ul>
<li><em>on-off renderer</em>: it produces black and white image. We recommed to use this algorithm in order to debug, because it is really fast;</li>
<li><em>flat renderer</em>: it estimates the solution of the rendering equation by neglecting any contribution of the light. It just uses the pigment of each surface to determine how to compute the final radiance;</li>
<li><em>pathtracing</em>: it allows the caller to tune number of rays thrown at each iteration, as well as the maximum depth. It implements Russian roulette, so in principle it will take a finite time to complete the calculation. Inside the <a href="./examples"><code>examples</code></a> directory there are input files defining different scenes.</li>
</ul>
<p >&gt;Note that the file <a href="./examples/demo.txt"><code>examples/demo.txt</code></a> contains instructions on how to write a correct input file.</p>
<p >The following command </p><div class="fragment"><div class="line">$ ./raytracer render -w 640 -h 360 --alg pathtracing --num-of-rays 5 --max-depth 4 --samples-per-pixel 25 --outf demo-5 -i ../examples/demo.txt</div>
</div><!-- fragment --><p> will generate the image below (which is defined in the input file <a href="./examples/demo.txt"><code>examples/demo.txt</code></a>)</p>
<p ><img src="./examples/demo-5.png" alt="Demo image" class="inline"/></p>
<p >Thanks to <code>ffmpeg</code> and a couple of cli options it is possibile to generate simple animations; the scripts <a href="demo_animation.sh"><code>demo_animation.sh</code></a> and <a href="generate-image.sh"><code>generate-image.sh</code></a> facilitates this, and by launching </p><div class="fragment"><div class="line">$ ./demo_animation.sh -j &lt;NUM_OF_CORES&gt;</div>
</div><!-- fragment --><p> will produce</p>
<p ><img src="./examples/demo.gif" alt="Demo animation" class="inline"/></p>
<p >Feel free to tweak the scripts to your own liking.</p>
<h2><a class="anchor" id="autotoc_md11"></a>
Convert images from HDR to LDR format</h2>
<p >raytracer can also convert images from HDR to LDR format (only <code>png</code> and <code>jpeg</code> are supported): use the <code>convertpfm2png</code> command as in the following example: </p><div class="fragment"><div class="line">$ ./raytracer convertpfm2png --inpfm=/path/to/pfm-file --outpng=/path/to/output-file -f 1.0 -g 1.0</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md12"></a>
Contributing</h1>
<p >If you wish to contribute or you have just found any bug, please open an issue or a pull request on our GitHub repository. Thank you!</p>
<h1><a class="anchor" id="autotoc_md13"></a>
Licence</h1>
<p >raytracer is licensed under the terms of the <a href="https://www.gnu.org/licenses/gpl-3.0.html">GNU General Public License v3.0</a> and is available for free. See the file <a href="https://github.com/federicopellegatta/raytracing/blob/master/LICENCE.md">LICENCE.md</a>. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
